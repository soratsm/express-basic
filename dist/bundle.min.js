import{fileURLToPath}from"url";import{dirname}from"path";import express from"express";import bodyParser from"body-parser";import logger from"./logger.js";import router from"./routes/index.js";const app=express(),__filename=(app.set("view engine","ejs"),fileURLToPath(import.meta.url)),__dirname=dirname(__filename);app.use("/public",express.static(__dirname+"/public")),app.use(bodyParser.urlencoded({extended:!0})),app.use(bodyParser.json()),app.use(logger),app.use("/",router),app.listen(8e3);export default(e,r,o)=>{var s=e.headers["x-forwarded-for"]||e.connection.remoteAddress||e.socket&&e.socket.remoteAddress||e.connection.socket&&e.connection.socket.remoteAddress||"0.0.0.0",t=(new Date).toISOString(),p=e.method,a=e.url,e=e.headers["user-agent"];console.log(s+` [${t}] "${p} ${a}" - `+e),o()};